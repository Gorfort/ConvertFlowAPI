<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta tags for character set and viewport -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Title of the HTML page -->
    <title>Currency Converter</title>
    <link rel="stylesheet" type="text/css" href="../css/styles.css" />
  </head>
  <body>
    <div class="Box1">
        <!-- Main content of the page -->
        <h1>Currency Converter</h1>
        <div class="Box2">
            <!-- Input for entering the amount to convert -->
            <label class="center-text" for="amount">Amount:</label>
            <input type="number" id="amount" placeholder="Enter amount" inputmode="numeric" style="text-align: center;" />

            <!-- Dropdown for selecting the source currency -->
            <label for="from">From</label>
            <select id="from"></select>

            <!-- Dropdown for selecting the target currency -->
            <label for="to">To</label>
            <select id="to"></select>

            <!-- Button to trigger the conversion -->
            <button onclick="convert()">Convert</button>
        </div>
        <!-- Paragraph element to display the conversion result -->
        <p id="result"></p>
    </div>

    <script>
        function populateCurrencies() {
          // Manually specify the currencies you want to include 
          const selectedCurrencies = [
            "USD", "EUR", "GBP", "JPY", "CAD",
            "AUD", "PLN", "INR", "BRL", "RUB",
            // Add or remove currencies as needed
          ];
      
          const fromCurrencySelect = document.getElementById("from");
          const toCurrencySelect = document.getElementById("to");
      
          // Clear existing options
          fromCurrencySelect.innerHTML = "";
          toCurrencySelect.innerHTML = "";
      
          // Add default option
          const defaultOption = document.createElement("option");
          defaultOption.value = "";
          defaultOption.text = "Select Currency";
          fromCurrencySelect.add(defaultOption);
          toCurrencySelect.add(defaultOption.cloneNode(true));
      
          // Add currency options for the selected currencies
          selectedCurrencies.forEach((currency) => {
            const option = document.createElement("option");
            option.value = currency;
            option.text = currency;
      
            // Append the option to both dropdowns
            fromCurrencySelect.add(option);
            toCurrencySelect.add(option.cloneNode(true));
          });
        }
      
        function convert() {
          const amount = document.getElementById("amount").value;
          const fromCurrency = document.getElementById("from").value;
          const toCurrency = document.getElementById("to").value;
      
          fetch(
            `http://localhost:3000/convert?amount=${amount}&from=${fromCurrency}&to=${toCurrency}`
          )
            .then((response) => response.json())
            .then((data) => {
              document.getElementById(
                "result"
              ).innerText = `${amount} ${fromCurrency} = ${data.convertedAmount} ${toCurrency}`;
            })
            .catch((error) =>
              console.error("Error converting currencies:", error)
            );
        }
      
        window.onload = function () {
          populateCurrencies();
        };
      </script>
    </script>
  </body>
</html>
